[build]
  publish = "."
  command = "echo 'No build step'"

[[headers]]
  for = "/*"
  [headers.values]
  Cache-Control = "public, max-age=0, must-revalidate"

# ========================
# üîê Admin Area Protection
# ========================

[[redirects]]
  from = "/admin/*"
  to = "/login.html"
  status = 302
  force = false
  conditions = { Role = ["!admin"] }

[[redirects]]
  from = "/admin/*"
  to = "/admin/:splat"
  status = 200
  force = false
  conditions = { Role = ["admin"] }

[[redirects]]
  from = "/admin"
  to = "/admin/index.html"
  status = 200
  force = false

# ========================
# üåç Inject Environment Variables
# ========================

[[plugins]]
package = "@netlify/plugin-inject-env"

  [plugins.inputs]
  file = "env.js"
  template = """
window.env = {
  FIREBASE_API_KEY: "$FIREBASE_API_KEY",
  FIREBASE_AUTH_DOMAIN: "$FIREBASE_AUTH_DOMAIN",
  FIREBASE_PROJECT_ID: "$FIREBASE_PROJECT_ID",
  FIREBASE_STORAGE_BUCKET: "$FIREBASE_STORAGE_BUCKET",
  FIREBASE_MESSAGING_SENDER_ID: "$FIREBASE_MESSAGING_SENDER_ID",
  FIREBASE_APP_ID: "$FIREBASE_APP_ID",
  FIREBASE_MEASUREMENT_ID: "$FIREBASE_MEASUREMENT_ID",
  CLOUDINARY_NAME: "$CLOUDINARY_NAME",
  CLOUDINARY_PRESET_NEWS: "$CLOUDINARY_PRESET_NEWS",
  CLOUDINARY_PRESET_COMP: "$CLOUDINARY_PRESET_COMP"
};
"""
